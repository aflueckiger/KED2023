<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Alex Flückiger">
<meta name="dcterms.date" content="2023-04-07">

<title>KED2023 - The ABC of Computational Text Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../..//_images/favicon/android-chrome-512x512.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<meta property="og:title" content="KED2023 - The ABC of Computational Text Analysis">
<meta property="og:description" content="#6 Learning Regular Expressions">
<meta property="og:site-name" content="KED2023">
<meta name="twitter:title" content="KED2023 - The ABC of Computational Text Analysis">
<meta name="twitter:description" content="In this hands-on seminar, bachelor students of social and cultural sciences learn the basics of programming among other essential technical skills.">
<meta name="twitter:image" content="https://aflueckiger.github.io/KED2023/_images/background.png">
<meta name="twitter:image-height" content="478">
<meta name="twitter:image-width" content="1179">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">KED2023</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../schedule.html">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../lectures.html">
 <span class="menu-text">Lectures</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../assignments.html">
 <span class="menu-text">Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../materials.html">
 <span class="menu-text">Materials</span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#recap-last-lecture" id="toc-recap-last-lecture" class="nav-link active" data-scroll-target="#recap-last-lecture">Recap last Lecture</a></li>
  <li><a href="#outline" id="toc-outline" class="nav-link" data-scroll-target="#outline">Outline</a></li>
  <li><a href="#text-as-pattern" id="toc-text-as-pattern" class="nav-link" data-scroll-target="#text-as-pattern">Text as Pattern</a>
  <ul class="collapse">
  <li><a href="#formal-search-patterns" id="toc-formal-search-patterns" class="nav-link" data-scroll-target="#formal-search-patterns">Formal Search Patterns</a>
  <ul class="collapse">
  <li><a href="#how-to-extract-all-email-addresses-in-a-text-collection" id="toc-how-to-extract-all-email-addresses-in-a-text-collection" class="nav-link" data-scroll-target="#how-to-extract-all-email-addresses-in-a-text-collection">How to extract <strong>all email addresse</strong>s in a text collection?</a></li>
  </ul></li>
  <li><a href="#what-are-patterns-for" id="toc-what-are-patterns-for" class="nav-link" data-scroll-target="#what-are-patterns-for">What are patterns for?</a></li>
  <li><a href="#data-cleaning-is-paramount" id="toc-data-cleaning-is-paramount" class="nav-link" data-scroll-target="#data-cleaning-is-paramount">Data Cleaning is paramount!</a></li>
  <li><a href="#what-are-regular-expressions-regex" id="toc-what-are-regular-expressions-regex" class="nav-link" data-scroll-target="#what-are-regular-expressions-regex">What are Regular Expressions (RegEx)?</a>
  <ul class="collapse">
  <li><a href="#regex-builds-on-two-classes-of-symbols" id="toc-regex-builds-on-two-classes-of-symbols" class="nav-link" data-scroll-target="#regex-builds-on-two-classes-of-symbols">RegEx builds on two classes of symbols</a></li>
  </ul></li>
  <li><a href="#finding-extracting" id="toc-finding-extracting" class="nav-link" data-scroll-target="#finding-extracting">Finding + Extracting</a>
  <ul class="collapse">
  <li><a href="#extended-globally-search-for-regular-expression-and-print-egrep" id="toc-extended-globally-search-for-regular-expression-and-print-egrep" class="nav-link" data-scroll-target="#extended-globally-search-for-regular-expression-and-print-egrep"><strong>e</strong>xtended <strong>g</strong>lobally search for <strong>r</strong>egular <strong>e</strong>xpression and <strong>p</strong>rint (egrep)</a></li>
  </ul></li>
  <li><a href="#quantifiers" id="toc-quantifiers" class="nav-link" data-scroll-target="#quantifiers">Quantifiers</a>
  <ul class="collapse">
  <li><a href="#repeat-preceding-character-x-times" id="toc-repeat-preceding-character-x-times" class="nav-link" data-scroll-target="#repeat-preceding-character-x-times">repeat preceding character <code>X</code> times</a></li>
  </ul></li>
  <li><a href="#character-sets" id="toc-character-sets" class="nav-link" data-scroll-target="#character-sets">Character Sets</a></li>
  <li><a href="#special-symbols" id="toc-special-symbols" class="nav-link" data-scroll-target="#special-symbols">Special Symbols</a></li>
  <li><a href="#the-power-of-." id="toc-the-power-of-." class="nav-link" data-scroll-target="#the-power-of-.">The power of <code>.*</code> …</a></li>
  <li><a href="#more-complex-examples" id="toc-more-complex-examples" class="nav-link" data-scroll-target="#more-complex-examples">More Complex Examples</a></li>
  <li><a href="#combining-regex-with-frequency-analysis" id="toc-combining-regex-with-frequency-analysis" class="nav-link" data-scroll-target="#combining-regex-with-frequency-analysis">Combining RegEx with Frequency Analysis</a>
  <ul class="collapse">
  <li><a href="#something-actually-useful" id="toc-something-actually-useful" class="nav-link" data-scroll-target="#something-actually-useful">something actually useful</a></li>
  </ul></li>
  <li><a href="#start-simple-add-complexity-subsequently." id="toc-start-simple-add-complexity-subsequently." class="nav-link" data-scroll-target="#start-simple-add-complexity-subsequently.">Start simple, <br>add complexity subsequently.</a></li>
  <li><a href="#in-class-exercise" id="toc-in-class-exercise" class="nav-link" data-scroll-target="#in-class-exercise">In-class: Exercise</a></li>
  <li><a href="#in-class-solution" id="toc-in-class-solution" class="nav-link" data-scroll-target="#in-class-solution">In-class: Solution</a></li>
  <li><a href="#replacing-removing" id="toc-replacing-removing" class="nav-link" data-scroll-target="#replacing-removing">Replacing + Removing</a>
  <ul class="collapse">
  <li><a href="#stream-editor-sed" id="toc-stream-editor-sed" class="nav-link" data-scroll-target="#stream-editor-sed"><strong>s</strong>tream <strong>ed</strong>itor (sed)</a></li>
  </ul></li>
  <li><a href="#contextual-replacing" id="toc-contextual-replacing" class="nav-link" data-scroll-target="#contextual-replacing">Contextual Replacing</a>
  <ul class="collapse">
  <li><a href="#reuse-match-with-grouping" id="toc-reuse-match-with-grouping" class="nav-link" data-scroll-target="#reuse-match-with-grouping">reuse match with grouping</a></li>
  </ul></li>
  <li><a href="#more-meta-symbols" id="toc-more-meta-symbols" class="nav-link" data-scroll-target="#more-meta-symbols">More Meta-Symbols</a></li>
  <li><a href="#greediness-trap" id="toc-greediness-trap" class="nav-link" data-scroll-target="#greediness-trap">Greediness Trap</a></li>
  <li><a href="#assignment-2-writing_hand" id="toc-assignment-2-writing_hand" class="nav-link" data-scroll-target="#assignment-2-writing_hand">Assignment #2 :writing_hand:</a></li>
  <li><a href="#in-class-exercises-i" id="toc-in-class-exercises-i" class="nav-link" data-scroll-target="#in-class-exercises-i">In-class: Exercises I</a></li>
  <li><a href="#in-class-solution-i" id="toc-in-class-solution-i" class="nav-link" data-scroll-target="#in-class-solution-i">In-class: Solution I</a></li>
  <li><a href="#in-class-self-check" id="toc-in-class-self-check" class="nav-link" data-scroll-target="#in-class-self-check">In-class: Self-Check</a></li>
  <li><a href="#in-class-exercise-ii" id="toc-in-class-exercise-ii" class="nav-link" data-scroll-target="#in-class-exercise-ii">In-class: Exercise II</a></li>
  <li><a href="#in-class-solution-ii" id="toc-in-class-solution-ii" class="nav-link" data-scroll-target="#in-class-solution-ii">In-class: Solution II</a></li>
  <li><a href="#in-class-exercise-iii" id="toc-in-class-exercise-iii" class="nav-link" data-scroll-target="#in-class-exercise-iii">In-class: Exercise III</a></li>
  <li><a href="#more-resources" id="toc-more-resources" class="nav-link" data-scroll-target="#more-resources">More Resources</a>
  <ul class="collapse">
  <li><a href="#required" id="toc-required" class="nav-link" data-scroll-target="#required">required</a></li>
  <li><a href="#highly-recommended" id="toc-highly-recommended" class="nav-link" data-scroll-target="#highly-recommended">highly recommended</a></li>
  <li><a href="#online-regular-expression-editor" id="toc-online-regular-expression-editor" class="nav-link" data-scroll-target="#online-regular-expression-editor">online regular expression editor</a></li>
  </ul></li>
  <li><a href="#questions" id="toc-questions" class="nav-link" data-scroll-target="#questions">Questions?</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The ABC of Computational Text Analysis</h1>
<p class="subtitle lead">#6 Learning Regular Expressions</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    Alex Flückiger 
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Faculty of Humanities and Social Sciences<br>University of Lucerne
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 7, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="recap-last-lecture" class="level2">
<h2 class="anchored" data-anchor-id="recap-last-lecture">Recap last Lecture</h2>
<ul>
<li>well-solved assignment #1 :confetti_ball:
<ul>
<li><a href="https://github.com/aflueckiger/KED2023/blob/main/assignments/assignment_1/flueckiger_KED2023_1_solutions.sh">example solution</a></li>
</ul></li>
<li>counting words :1234:
<ul>
<li>particular words or entire vocabulary</li>
</ul></li>
<li>preprocessing ​and cleaning :soap:</li>
</ul>
<div class="notes">
<ul>
<li>Übung
<ul>
<li>Fragen?</li>
<li>Bearbeitungszeit unterschiedlich (1.5h - 8h)</li>
<li>Beispiellösungen aufgeschaltet, andere Wege möglich</li>
<li>ungewollte Hürde: locate nicht standardmässig installiert</li>
</ul></li>
<li>Frequenzanalysen
<ul>
<li>Übersicht gewinnen: Wo liegen Schwerpunkte?</li>
<li>komparative Vergleich über Zeit oder Akteure (z.B. Partei)</li>
<li>vergleichbar mit Ngram-Viewer</li>
</ul></li>
</ul>
</div>
</section>
<section id="outline" class="level2">
<h2 class="anchored" data-anchor-id="outline">Outline</h2>
<ul>
<li>introducing regular expression :sparkles:</li>
<li>practicing the writing of patterns :roller_coaster:</li>
</ul>
<div class="notes">
<ul>
<li>Halbzeit von Semester, langsam gehts ans Eingemachte</li>
<li>Simpler Plan, RegEx allerdings mühsam</li>
<li>uralt, aber unumgänglich für Data Cleaning</li>
<li>je nach Zeit, nächstes Mal nochmals RegEx + Übungszeit</li>
</ul>
</div>
</section>
<section id="text-as-pattern" class="level1">
<h1>Text as Pattern</h1>
<section id="formal-search-patterns" class="level2">
<h2 class="anchored" data-anchor-id="formal-search-patterns">Formal Search Patterns</h2>
<section id="how-to-extract-all-email-addresses-in-a-text-collection" class="level3">
<h3 class="anchored" data-anchor-id="how-to-extract-all-email-addresses-in-a-text-collection">How to extract <strong>all email addresse</strong>s in a text collection?</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Please</span> contact us via info@organization.org.</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">---</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="ex">For</span> specific questions ask Mrs. Green <span class="er">(</span><span class="ex">a.green@mail.com</span><span class="kw">)</span><span class="bu">.</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="ex">---</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Reach</span> out to support@me.ch</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="incremental">
<p>:point_right: <strong>Solution:</strong> Write a single pattern to match any valid email adress</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]</span><span class="dt">{2</span><span class="op">,</span><span class="dt">}</span>   <span class="co"># match any email address (case-insensitive)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="notes">
<ul>
<li>Was meint Text als Pattern?
<ul>
<li>am einfachsten an Problemstellung zu sehen</li>
<li>Email-Adressen sind immer nach dem gleichen Muster aufgebaut</li>
<li>ganze Sprache ist voller Muster –&gt; Grammatik</li>
</ul></li>
<li>Frage an Studis: Wie macht ihr das?
<ul>
<li>Bsp. Marketing-Analyse oder Wistleblower Korpus</li>
</ul></li>
<li>allen bekannt: Suche in Text
<ul>
<li>Suche nach @ findet alle Adressen</li>
<li>wie aber extrahieren und welche Teile gehören genau dazu?</li>
</ul></li>
<li>kryptisch + hässlich, aber beliebig expressive Beschreibungssprache</li>
</ul>
</div>
</div>
</section>
</section>
<section id="what-are-patterns-for" class="level2">
<h2 class="anchored" data-anchor-id="what-are-patterns-for">What are patterns for?</h2>
<ul>
<li>finding :mag_right:</li>
<li>extracting :hammer_and_wrench:</li>
<li>removing/cleaning :wastebasket:</li>
<li>replacing :repeat:</li>
</ul>
<p><strong>… specific parts in texts</strong></p>
<div class="notes">
<ul>
<li>RegEx mit breiter Anwendung
<ul>
<li>für Preprocessing Textanalysen unverzichtbar</li>
<li>Data Cleaning</li>
</ul></li>
<li>funktioniert genau gleich in Python, R und anderen Programmiersprachen</li>
</ul>
</div>
</section>
<section id="data-cleaning-is-paramount" class="level2">
<h2 class="anchored" data-anchor-id="data-cleaning-is-paramount">Data Cleaning is paramount!</h2>
<p><img src="../images/data_cleaning.png" class="img-fluid"></p>
<div class="notes">
<ul>
<li>Aufbereitung braucht viel Zeit</li>
<li>einfaches Modell mit ein paar Zeilen Code, Bereinigung immer spezifisch für Datenquelle</li>
</ul>
<p><a href="https://medium.com/koverhoop/data-cleaning-and-pre-processing-in-python-b28eea7ac045">src</a></p>
</div>
</section>
<section id="what-are-regular-expressions-regex" class="level2">
<h2 class="anchored" data-anchor-id="what-are-regular-expressions-regex">What are Regular Expressions (RegEx)?</h2>
<section id="regex-builds-on-two-classes-of-symbols" class="level3">
<h3 class="anchored" data-anchor-id="regex-builds-on-two-classes-of-symbols">RegEx builds on two classes of symbols</h3>
<ul>
<li><strong>literal</strong> characters and strings
<ul>
<li>letters, digits, words, phrases, dates etc.</li>
</ul></li>
<li><strong>meta</strong> expressions with special meaning
<ul>
<li>e.g., <code>\w</code> represents alphanumeric characters</li>
<li><code>[Cc]o+l</code> → Col, col, Cool, coool …</li>
</ul></li>
<li>akin to regular languages</li>
</ul>
<div class="notes">
<ul>
<li>Regex = Muster = generalisierende Beschreibung</li>
<li>Erklären von String = Zeichensequenz</li>
<li>zwei Arten von Zeichen</li>
<li>Literale = Zeichen steht für tatsächliches Zeichen (buchstabentreue Repräsentation)
<ul>
<li>wie letztes Mal</li>
</ul></li>
<li>Meta-Zeichen = Zeichen mit spezieller Bedeutung
<ul>
<li>anfänglich verwirrend</li>
<li>Thema heutiger Sitzung</li>
</ul></li>
<li>genaue mathematische Definition hier nicht Thema</li>
</ul>
</div>
</section>
</section>
<section id="finding-extracting" class="level2">
<h2 class="anchored" data-anchor-id="finding-extracting">Finding + Extracting</h2>
<section id="extended-globally-search-for-regular-expression-and-print-egrep" class="level3">
<h3 class="anchored" data-anchor-id="extended-globally-search-for-regular-expression-and-print-egrep"><strong>e</strong>xtended <strong>g</strong>lobally search for <strong>r</strong>egular <strong>e</strong>xpression and <strong>p</strong>rint (egrep)</h3>
<ul>
<li>tool to filter/keep matching lines only</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check a regular expression quickly</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"check this pattern"</span> <span class="kw">|</span> <span class="fu">egrep</span> <span class="st">"pattern"</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="st">"yes"</span> file.txt        <span class="co"># search in a specific file</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-r</span> <span class="st">"yes"</span> folder       <span class="co"># search recursively within folder</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="st">"yes"</span> <span class="pp">*</span>.txt           <span class="co"># keep lines containing pattern (yes) across txt-files</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-i</span> <span class="st">"yes"</span> <span class="pp">*</span>.txt        <span class="co"># dito, ignore casing (Yes, yes, YES ...)</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-v</span> <span class="st">"noisy"</span> <span class="pp">*</span>.txt      <span class="co"># do NOT keep lines containing noisy</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"># extract raw match only to allow for subsequent counting</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-o</span> <span class="st">"only"</span> <span class="pp">*</span>.txt       <span class="co"># print match only instead of entire line</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-h</span> <span class="st">"only"</span> <span class="pp">*</span>.txt       <span class="co"># suppress file name</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="notes">
<ul>
<li>Empfehlung: egrep benutzen statt grep</li>
</ul>
</div>
</section>
</section>
<section id="quantifiers" class="level2">
<h2 class="anchored" data-anchor-id="quantifiers">Quantifiers</h2>
<section id="repeat-preceding-character-x-times" class="level3">
<h3 class="anchored" data-anchor-id="repeat-preceding-character-x-times">repeat preceding character <code>X</code> times</h3>
<ul>
<li><code>?</code> zero or one</li>
<li><code>+</code> one or more</li>
<li><code>*</code> zero or any number</li>
<li><code>{n}</code>, <code>{m,n}</code> a specified number of times</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-r</span> <span class="st">"Bundesrath?es"</span>        <span class="co"># match old and new spelling</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-r</span> <span class="st">"a+"</span>                   <span class="co"># match one or more "a"</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-r</span> <span class="st">"e{2}"</span>                 <span class="co"># match sequence of two "e"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>:warning: Do not confuse regex with Bash wildcards!</p>
<div class="notes">
<ul>
<li>erste Klasse von Meta-Symbolen: Quantifikatoren</li>
<li>definieren Anzahl von vorangehendem Zeichen</li>
<li>in Regex beziehen sich Operatoren auf vorderes Zeichen, in Wildcard nicht</li>
</ul>
</div>
</section>
</section>
<section id="character-sets" class="level2">
<h2 class="anchored" data-anchor-id="character-sets">Character Sets</h2>
<ul>
<li><code>[...]</code> any of the characters between brackets
<ul>
<li>any vowel: <code>[auoei]</code></li>
<li>any digit: <code>[0-9]</code></li>
<li>any letter: <code>[A-Za-z]</code></li>
</ul></li>
<li><code>[^...]</code> any character but none of these (negation)
<ul>
<li>anything but the vowels: <code>[^auoei]</code></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># match the capitalized and non-capitalized form</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-r</span> <span class="st">"[Gg]rüne"</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># match sequences of 3 vowels</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-r</span> [aeiou]{3}</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># extract all bigrams (sequence of two words)</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-rohi</span> <span class="st">"[a-z]+ [a-z]+"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="special-symbols" class="level2">
<h2 class="anchored" data-anchor-id="special-symbols">Special Symbols</h2>
<ul>
<li><code>.</code> matches any character (excl. newline)</li>
<li><code>\</code> escapes to match literal
<ul>
<li><code>\.</code> means the literal <code>.</code> instead of “any symbol”</li>
</ul></li>
<li><code>\w</code> matches any alpha-numeric character
<ul>
<li>same as <code>[A-Za-z0-9_]</code></li>
</ul></li>
<li><code>\s</code> matches any whitespace (space, newline, tab)
<ul>
<li>same as <code>[ \t\n]</code></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># match anything between brackets</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-r</span> <span class="st">"\(.*\)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="notes">
<ul>
<li>Klammern sind auch Metasymbole</li>
</ul>
</div>
</section>
<section id="the-power-of-." class="level2" data-background="#4d7e65">
<h2 data-background="#4d7e65" class="anchored" data-anchor-id="the-power-of-.">The power of <code>.*</code> …</h2>
<p>matches <strong><em>any character</em></strong> <strong><em>any times</em></strong></p>
</section>
<section id="more-complex-examples" class="level2">
<h2 class="anchored" data-anchor-id="more-complex-examples">More Complex Examples</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract basename of URLs</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-ro</span> <span class="st">"www\.\w+\.[a-z]{2,}"</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># extract valid email adresses (case-insensitive)</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-iro</span> <span class="st">"[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}"</span> <span class="pp">**</span>/<span class="pp">*</span>.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="notes">
<ul>
<li>bei Erstellung von Online-Accounts prüfen RegEx Validität von Email</li>
</ul>
</div>
</section>
<section id="combining-regex-with-frequency-analysis" class="level2">
<h2 class="anchored" data-anchor-id="combining-regex-with-frequency-analysis">Combining RegEx with Frequency Analysis</h2>
<section id="something-actually-useful" class="level3">
<h3 class="anchored" data-anchor-id="something-actually-useful">something actually useful</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># count political areas by looking up words ending with "politik"</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-rioh</span> <span class="st">"\w*politik"</span> <span class="pp">**</span>/<span class="pp">*</span>.txt <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span> <span class="at">-c</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-h</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># count ideologies/concepts by looking up words ending with "ismus"</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-rioh</span> <span class="st">"\w*ismus"</span> <span class="pp">**</span>/<span class="pp">*</span>.txt <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span> <span class="at">-c</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-h</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="notes">
<ul>
<li>bis jetzt Spielerei, um RegEx zu lernen</li>
<li>Grundlage für Seminararbeit
<ul>
<li>systematisches Suchen, quantifizieren und analysieren von Begriffsverwendung</li>
</ul></li>
</ul>
</div>
</section>
</section>
<section id="start-simple-add-complexity-subsequently." class="level2" data-background="../images/knitting.jpg">
<h2 data-background="../images/knitting.jpg" class="anchored" data-anchor-id="start-simple-add-complexity-subsequently.">Start simple, <br>add complexity subsequently.</h2>
<!-- https://wallpaperscraft.com/download/needles_thread_knitting_105073/2048x1365 -->
</section>
<section id="in-class-exercise" class="level2" data-background="#3c70b5">
<h2 data-background="#3c70b5" class="anchored" data-anchor-id="in-class-exercise">In-class: Exercise</h2>
<ol type="1">
<li>Use the command line to navigate to the local copy of the Github repository KED2023 and make sure it is up-to-date with <code>git pull</code>. Change in to the directory <code>materials/data/swiss_party_programmes/txt</code>.</li>
<li>Use <code>egrep</code> to extract all uppercased words like <code>UNO, OECD, SP</code> and count their frequency.</li>
<li>Use <code>egrep</code> to extract all plural nouns with female endings e.g.&nbsp;<code>Schweizerinnen</code> (starting with an uppercase letter, ending with <code>innen</code>, and any letter in between). Do the same for the male forms. Is there a qualitative or a quantitative difference between the gendered forms?</li>
</ol>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Some not so random hints </span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">piping</span> with <span class="kw">|</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">uniq</span> <span class="at">-c</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-roh</span> <span class="pp">**</span>/<span class="pp">*</span>.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="notes">
<ul>
<li><code>egrep -roh "[A-Z]{2,}" **/*.txt | sort | uniq -c | sort -h</code></li>
<li><strong>Pause</strong></li>
<li>CTRL+C um Befehl abzubrechen (falls länger als eine Sekunde dauert, ist etwas falsch)</li>
<li>Start mit einfachem grep-Befehl, dann schauen, was gematcht wird und dann auszählen</li>
</ul>
</div>
</section>
<section id="in-class-solution" class="level2" data-background="#3c70b5">
<h2 data-background="#3c70b5" class="anchored" data-anchor-id="in-class-solution">In-class: Solution</h2>
<ol type="1">
<li>Use <code>egrep</code> to extract all uppercased words like <code>UNO, OECD, SP</code> and count their frequency.
<ul>
<li><code>egrep -roh "[A-Z]{2,}" **/*.txt | sort | uniq -c | sort -h</code></li>
</ul></li>
<li>Use <code>egrep</code> to extract all plural nouns with female endings e.g.&nbsp;<code>Schweizerinnen</code> (starting with an uppercase letter, ending with <code>innen</code>, and any letter in between). Do the same for the male forms. Is there a qualitative or a quantitative difference between the gendered forms?
<ul>
<li><code>egrep -roh "[A-Z][a-z]+innen\b" **/*.txt | sort | uniq -c | sort -h</code></li>
<li><code>egrep -roh "[A-Z][a-z]+er\b" **/*.txt | sort | uniq -c | sort -h</code> (there is no way with regular expression to extract only nouns of the male form but not <code>Wasser</code> and the like. For this, you have to use some kind of machine learning.)</li>
</ul></li>
</ol>
</section>
<section id="replacing-removing" class="level2">
<h2 class="anchored" data-anchor-id="replacing-removing">Replacing + Removing</h2>
<section id="stream-editor-sed" class="level3">
<h3 class="anchored" data-anchor-id="stream-editor-sed"><strong>s</strong>tream <strong>ed</strong>itor (sed)</h3>
<ul>
<li>advanced find + replace using regex
<ul>
<li><code>sed "s/WHAT/WITH/g" file.txt</code></li>
</ul></li>
<li><code>sed</code> replaces any sequence, <code>tr</code> only single symbols</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"hello"</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="st">"s/llo/y/g"</span>      <span class="co"># replace "llo" with a "y"</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># by setting the g flag in "s/llo/y/g",</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># sed replaces all occurences, not only the first one</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="notes">
<ul>
<li>egrep für Extraktion, sed für Manipulation
<ul>
<li>wichtig um Daten aufzubereiten</li>
</ul></li>
<li>wie Suchen-Ersetzen-Funktion von Word, nur mächtiger dank Regex</li>
<li>Löschen = Ersetzen mit leeren Sequenz</li>
<li>flag “global”</li>
<li>Demonstration mit </li>
<li><code>echo "hello hell" | sed "s/l\b/lo/g"</code></li>
</ul>
</div>
</section>
</section>
<section id="contextual-replacing" class="level2">
<h2 class="anchored" data-anchor-id="contextual-replacing">Contextual Replacing</h2>
<section id="reuse-match-with-grouping" class="level3">
<h3 class="anchored" data-anchor-id="reuse-match-with-grouping">reuse match with grouping</h3>
<ul>
<li>define a group with parentheses <code>(group_pattern)</code></li>
<li><code>\1</code> equals the expression inside first pair of parentheses</li>
<li><code>\2</code> expression of second pair</li>
<li>…</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># swap order of name (last first -&gt; first last)</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Lastname Firstname"</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="at">-E</span> <span class="st">"s/(.+) (.+)/\2 \1/"</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># matching also supports grouping</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co"># match any pair of two identical digits</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="fu">egrep</span> <span class="at">-r</span> <span class="st">"([0-9])\1"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="notes">
<ul>
<li>Teilausdruck gruppieren zur Wiederverwendung</li>
<li>Klammern sind ebenfalls Metazeichen</li>
</ul>
</div>
</section>
</section>
<section id="more-meta-symbols" class="level2">
<h2 class="anchored" data-anchor-id="more-meta-symbols">More Meta-Symbols</h2>
<ul>
<li><code>\b</code> matches word boundary
<ul>
<li><code>word\b</code> does not match <code>words</code></li>
</ul></li>
<li><code>^</code> matches begin of line and <code>$</code> end of line
<ul>
<li><code>^A</code> matches only <code>A</code> at line start</li>
</ul></li>
<li><code>|</code> is a disjunction (OR)
<ul>
<li><code>(Mr|Mrs|Mr\.|Mrs\.) Green</code> matches alternatives</li>
</ul></li>
</ul>
<div class="notes">
<ul>
<li>diese Symbole sind leer, sie matchen keine Zeichen</li>
<li>spezifizieren Positon von regulärem Ausdruck</li>
<li>line start hilfreich für übung</li>
</ul>
</div>
</section>
<section id="greediness-trap" class="level2">
<h2 class="anchored" data-anchor-id="greediness-trap">Greediness Trap</h2>
<ul>
<li>greedy ~ match the longest string possible</li>
<li>quantifiers <code>*</code> or <code>+</code> are greedy</li>
<li>non-greedy by excluding some symbols
<ul>
<li><code>[^EXCLUDE_SYMBOLS]</code> instead of <code>.*</code></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># greedy: an apple, other apple</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"an apple, other apple"</span> <span class="kw">|</span> <span class="fu">egrep</span> <span class="st">"a.*apple"</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># non-greedy: an apple</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"an apple, other apple"</span> <span class="kw">|</span> <span class="fu">egrep</span> <span class="st">"a[^,]*apple"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="notes">
<ul>
<li><code>.*</code> = jegliche Zeichen, beliebige Länge</li>
</ul>
</div>
</section>
<section id="assignment-2-writing_hand" class="level2">
<h2 class="anchored" data-anchor-id="assignment-2-writing_hand">Assignment #2 :writing_hand:</h2>
<ul>
<li>get/submit via OLAT
<ul>
<li>starting tomorrow</li>
<li>deadline 15 April 2023, 23:59</li>
</ul></li>
<li>use forum on <a href="https://lms.uzh.ch/auth/RepositoryEntry/16703095856">OLAT</a>
<ul>
<li>subscribe to get notifications</li>
</ul></li>
<li>ask friends for support, not solutions</li>
</ul>
<div class="notes">
<ul>
<li></li>
</ul>
</div>
</section>
<section id="in-class-exercises-i" class="level2" data-background="#3c70b5">
<h2 data-background="#3c70b5" class="anchored" data-anchor-id="in-class-exercises-i">In-class: Exercises I</h2>
<ol type="1">
<li>Use <code>egrep</code> to extract capitalized words and count them. What are the most frequent nouns?</li>
<li>Use <code>egrep</code> to extract words following any of these strings: <code>der die das</code>. Hint: Use a disjunction.</li>
<li>Do the self-check on the next slide.</li>
<li>Use <code>sed -E</code> to remove the table of content, the footer and the page number in the programme of the Green Party. Check the corresponding PDF to get a visual impression and test your regular expression with <code>egrep</code> first to see if you match the correct parts in the document.</li>
</ol>
</section>
<section id="in-class-solution-i" class="level2" data-background="#3c70b5">
<h2 data-background="#3c70b5" class="anchored" data-anchor-id="in-class-solution-i">In-class: Solution I</h2>
<ol type="1">
<li>Use <code>egrep</code> to extract capitalized words and count them. What are the most frequent nouns?
<ul>
<li><code>egrep -roh "[A-Z][a-z]+" **/*.txt | sort | uniq -c | sort -h</code></li>
</ul></li>
<li>Use <code>egrep</code> to extract words following any of these strings: <code>der die das</code>. Hint: Use a disjunction.
<ul>
<li><code>egrep -roh "(der|die|das) \w+" **/*.txt</code></li>
</ul></li>
<li>Use <code>sed -E</code> to remove the table of content, the footer and the page number in the programme of the Green Party. Check the corresponding PDF to get a visual impression and test your regular expression with <code>egrep</code> first to see if you match the correct parts in the document.
<ul>
<li><code>cat gruene_programme_2019.txt | sed "1,192d" | sed -E "s/^Wahlplattform.*2023$//g" | sed -E "s/^[0-9]+$//g"</code></li>
</ul></li>
</ol>
</section>
<section id="in-class-self-check" class="level2" data-background="#3c70b5">
<h2 data-background="#3c70b5" class="anchored" data-anchor-id="in-class-self-check">In-class: Self-Check</h2>
<section id="equivalent-patterns" class="level4">
<h4 class="anchored" data-anchor-id="equivalent-patterns">equivalent patterns</h4>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">a+</span> == aa<span class="pp">*</span>               <span class="co"># "a" once or more than once</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="ex">a?</span> == <span class="er">(</span><span class="ex">a</span><span class="kw">|</span><span class="ex">_</span><span class="kw">)</span>             <span class="co"># "a" once or nothing</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="ex">a{3}</span> == aaa             <span class="co"># three "a"</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="ex">a</span><span class="dt">{2</span><span class="op">,</span><span class="dt">3}</span> == <span class="er">(</span><span class="ex">aa</span><span class="kw">|</span><span class="ex">aaa</span><span class="kw">)</span>      <span class="co"># two or three "a"</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="ex">[ab]</span> == <span class="er">(</span><span class="ex">a</span><span class="kw">|</span><span class="ex">b</span><span class="kw">)</span>           <span class="co"># "a" or "b"</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="ex">[0-9]</span> == <span class="er">(</span><span class="ex">0</span><span class="kw">|</span><span class="ex">1</span><span class="kw">|</span><span class="ex">2</span><span class="kw">|</span><span class="ex">3</span><span class="kw">|</span><span class="ex">4</span><span class="kw">|</span><span class="ex">5</span><span class="kw">|</span><span class="ex">6</span><span class="kw">|</span><span class="ex">7</span><span class="kw">|</span><span class="ex">8</span><span class="kw">|</span><span class="ex">9</span><span class="kw">)</span>  <span class="co">#any digit</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="in-class-exercise-ii" class="level2" data-background="#3c70b5">
<h2 data-background="#3c70b5" class="anchored" data-anchor-id="in-class-exercise-ii">In-class: Exercise II</h2>
<ol type="1">
<li>Count all the bigrams (sequence of two words) using character sets and quantifiers. What about trigrams (three words)?</li>
<li>Extract the words following numbers (also consider numbers like: <code>1'000, 1,000 or 5%</code>). Then, count all the words while excluding the numbers themselves. Hint: Pipe another grep to remove the digits.</li>
<li>You are ready to come up with your own patterns…</li>
</ol>
</section>
<section id="in-class-solution-ii" class="level2" data-background="#3c70b5">
<h2 data-background="#3c70b5" class="anchored" data-anchor-id="in-class-solution-ii">In-class: Solution II</h2>
<ol type="1">
<li>Count all the bigrams (sequence of two words) using character sets and quantifiers. What about trigrams (three words)?
<ul>
<li><code>egrep -hoir "\b[a-z]+ [a-z]+\b" | sort | uniq -c | sort -h</code></li>
<li><code>egrep -hoir "\b[a-z]+ [a-z]+ [a-z]+\b" | sort | uniq -c | sort -h</code></li>
</ul></li>
<li>Extract the words following numbers (also consider numbers like: <code>1'000, 1,000 or 5%</code>). Then, count all the words while excluding the numbers themselves. Hint: Pipe another grep to remove the digits.
<ul>
<li><code>egrep -rhoi "[0-9][0-9,'%]+ [a-z]+" | egrep -io "[a-z]+" | sort | uniq -c | sort -h</code></li>
<li>Alternative: <code>egrep -rhoi "[0-9][0-9,'%]+ [a-z]+" | sed -E "s/[0-9][0-9,'%]+//g" | sort | uniq -c | sort -h</code></li>
</ul></li>
</ol>
</section>
<section id="in-class-exercise-iii" class="level2" data-background="#3c70b5">
<h2 data-background="#3c70b5" class="anchored" data-anchor-id="in-class-exercise-iii">In-class: Exercise III</h2>
<ol type="1">
<li><p>Since you know about RegEx, we can use a more sophisticated tokenizer to split a text into words. What is the difference between the old and new approach? Test it and check the helper page with <code>man</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># new, improved approach</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> text.txt <span class="kw">|</span> <span class="fu">tr</span> <span class="at">-sc</span> <span class="st">"[a-zäöüA-ZÄÖÜ0-9-]"</span> <span class="st">"\n"</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># old approach</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> text.txt <span class="kw">|</span> <span class="fu">tr</span> <span class="st">" "</span> <span class="st">"\n"</span>   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
<section id="more-resources" class="level2">
<h2 class="anchored" data-anchor-id="more-resources">More Resources</h2>
<section id="required" class="level3">
<h3 class="anchored" data-anchor-id="required">required</h3>
<ul>
<li>Ben Schmidt. 2019. <a href="https://github.com/HumanitiesDataAnalysis/HDA19/blob/master/Handouts/01-regex.pdf">Regular Expressions</a>.</li>
<li><a href="https://aflueckiger.github.io/KED2023/materials/cheatsheet_command_line.pdf">Cheatsheet</a> of this course</li>
</ul>
<p><br></p>
</section>
<section id="highly-recommended" class="level3">
<h3 class="anchored" data-anchor-id="highly-recommended">highly recommended</h3>
<ul>
<li>Nikolaj Lindberg. <a href="https://stts.se/egrep_for_linguists/egrep_for_linguists.pdf">egrep for Linguists</a>.</li>
</ul>
<p><br></p>
</section>
<section id="online-regular-expression-editor" class="level3">
<h3 class="anchored" data-anchor-id="online-regular-expression-editor">online regular expression editor</h3>
<ul>
<li><a href="https://regex101.com/">regex101</a> to write and check patterns</li>
</ul>
</section>
</section>
<section id="questions" class="level2 white-text" data-background="../images/paint-anna-kolosyuk-unsplash.jpg">
<h2 class="white-text anchored" data-background="../images/paint-anna-kolosyuk-unsplash.jpg" data-anchor-id="questions">Questions?</h2>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2023, Alex Flückiger</div>   
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/aflueckiger/KED2023">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



</body></html>